# توثيق ملف أنواع السيناريو (Screenplay Types)

**اسم الملف:** `src/types/screenplay.ts`
**الغرض:** يحتوي هذا الملف على تعريفات واجهات TypeScript (Interfaces) التي تحدد هياكل البيانات المستخدمة في محرر السيناريو. لا يحتوي الملف على دوال تنفيذية، بل يقتصر على تعريف الأنواع لضمان سلامة البيانات (Type Safety) في التطبيق.

---

## 1. واجهة `ScreenplayFormat`
تُستخدم لتحديد تنسيق عنصر معين في السيناريو (مثل: مشهد، حوار، أكشن).

*   `id: string`: المعرف الفريد للتنسيق (مثل "scene-heading", "dialogue").
*   `label: string`: الاسم الظاهر للمستخدم لهذا التنسيق (مثل "Scene Heading").
*   `shortcut: string`: اختصار لوحة المفاتيح لتطبيق هذا التنسيق (مثل "Ctrl+1").
*   `color: string`: لون مميز لهذا التنسيق يستخدم في واجهة المستخدم.
*   `icon: LucideIcon`: أيقونة تمثل هذا التنسيق (من مكتبة Lucide React).

## 2. واجهة `DocumentStats`
تُستخدم لتخزين إحصائيات المستند الحالي.

*   `words: number`: إجمالي عدد الكلمات في السيناريو.
*   `characters: number`: إجمالي عدد الأحرف.
*   `pages: number`: العدد التقديري للصفحات.
*   `scenes: number`: عدد المشاهد في السيناريو.

## 3. واجهة `FontOption`
تُستخدم لتعريف خيارات الخطوط المتاحة في المحرر.

*   `value: string`: القيمة الفعلية للخط (اسم الخط المستخدم في CSS).
*   `label: string`: الاسم الظاهر للمستخدم في قائمة اختيار الخطوط.

## 4. واجهة `TextSizeOption`
تُستخدم لتعريف خيارات أحجام النصوص المتاحة.

*   `value: string`: قيمة حجم الخط (مثل "12px", "1rem").
*   `label: string`: التسمية الظاهرة للحجم (مثل "Normal", "Large").

## 5. واجهة `ClassificationRecord`
تُستخدم لتسجيل عمليات تصنيف الأسطر (لأغراض التحليل أو الذكاء الاصطناعي).

*   `line: string`: نص السطر الذي تم تصنيفه.
*   `classification: string`: التصنيف الذي تم تعيينه للسطر (نوع العنصر).
*   `timestamp: number`: الطابع الزمني لوقت حدوث التصنيف.

## 6. واجهة `ContextMemory`
تُستخدم لإدارة "ذاكرة السياق" للمساعد الذكي أو ميزات الإكمال التلقائي، لتذكر العناصر المتكررة.

*   `sessionId: string`: معرف فريد لجلسة العمل الحالية.
*   `lastModified: number`: طابع زمني لآخر تعديل تم على الذاكرة.
*   `data`: كائن يحتوي على البيانات الفعلية:
    *   `commonCharacters: string[]`: قائمة بأسماء الشخصيات الأكثر استخداماً.
    *   `commonLocations: string[]`: قائمة بأسماء المواقع الأكثر استخداماً.
    *   `lastClassifications: string[]`: سجل بآخر التصنيفات التي تمت.
    *   `characterDialogueMap: { [character: string]: number }`: خريطة تربط كل شخصية بعدد مرات الحوار الخاص بها (لتحديد الشخصيات الرئيسية).

## 7. واجهة `LineContext`
تُستخدم لتوفير سياق كامل حول سطر معين، مما يساعد في تحديد نوعه تلقائياً أو معالجته.

*   `previousLines: string[]`: مصفوفة تحتوي على نصوص الأسطر السابقة.
*   `currentLine: string`: نص السطر الحالي قيد المعالجة.
*   `nextLines: string[]`: مصفوفة تحتوي على نصوص الأسطر التالية.
*   `previousTypes: string[]`: أنواع (تنسيقات) الأسطر السابقة.
*   `stats`: كائن إحصائيات للسطر الحالي:
    *   `wordCount: number`: عدد كلمات السطر.
    *   `charCount: number`: عدد أحرف السطر.
    *   `hasColon: boolean`: هل يحتوي السطر على نقطتين رأسيتين؟ (مؤشر لاسم شخصية أحياناً).
    *   `hasPunctuation: boolean`: هل يحتوي على علامات ترقيم؟
    *   `startsWithBullet: boolean`: هل يبدأ بنقطة أو تعداد؟
    *   `isShort: boolean`: هل السطر قصير جداً؟
    *   `isLong: boolean`: هل السطر طويل جداً؟
*   `pattern`: كائن يصف الأنماط الهيكلية المحيطة بالسطر:
    *   `isInDialogueBlock: boolean`: هل يقع السطر ضمن كتلة حوار؟
    *   `isInSceneHeader: boolean`: هل السطر جزء من ترويسة مشهد؟
    *   `lastSceneDistance: number`: عدد الأسطر منذ آخر ترويسة مشهد.
    *   `lastCharacterDistance: number`: عدد الأسطر منذ آخر اسم شخصية.
